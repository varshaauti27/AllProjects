@*@model IEnumerable<BlogPostWebsite.Models.PostViewModel>*@
@model PagedList.IPagedList<BlogPostWebsite.Models.PostViewModel>
@using PagedList.Mvc;

<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "ExpirationDates";
}

<div class="jumbotron alert-info">
    <h1>Blogs..</h1>
    <p class="lead"></p>
</div>


@*@Html.Partial("_SearchNavBar")*@


<div class="row col-sm-12">
    <div class="col-sm-12 text-right">
        <span class="text-danger" id="errorMessages"></span>
    </div>
</div>
<div class="col-sm-12">
    <h3>All Blogs</h3>
    <hr />
</div>


@if (Model != null)
{
    foreach (var item in Model)
    {
        <form action="/Blog/SaveExpirationDate/" method="post">

            <div class="row col-sm-12">
                @*<input type="datetime" name="ExpirationDate" id="ExpiryDate" value="@item.Post.ExpirationDate" /><label for="ExpiryDate">Expiration Date</label>*@
                <div class="post-info col-sm-12">
                    <div class="d-flex justify-content-between align-items-center">
                        <input type="number" readonly hidden name="PostId" value="@item.Post.PostId" />
                        <h4>@item.Post.Title</h4>
                        <small>@item.AuthorName | @item.Post.DatePosted.ToShortDateString()</small>
                    </div>

                    <ul>
                        <li>@Html.Raw(item.Post.Description)</li>
                    </ul>

                    <div class="row col-sm-12">
                        <label for="expiration-datepicker"><small>Expiration Date</small></label>
                        <input type="datetime" class="form-control datepick form-control-sm" id="expiration-datepicker" name="ExpirationDate" value=@item.Post.ExpirationDate placeholder="Select expiration Date" style="width:130px;" readonly>
                        <button type="submit" class="btn btn-sm btn-secondary" style="margin-left:10px">Save Expiration Date</button>
                    </div>
                </div>
            </div>
        </form>
    }
}

<br />
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

    @Html.PagedListPager(Model, page => Url.Action("ExpirationDates",
        new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))



    @section scripts {
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.standalone.min.css" rel="stylesheet" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>

        <script src="~/Scripts/BlogSearch.js"></script>

        <script type="text/javascript">
            $(document).ready(function () {

                $(".datepick").datepicker();

            });
        </script>
    }
